[gd_scene load_steps=15 format=3 uid="uid://djpp1ghasp40d"]

[ext_resource type="Script" uid="uid://k0pbucgikv38" path="res://scenes/enemies/drone/drone.gd" id="1_but12"]
[ext_resource type="Texture2D" uid="uid://ctfuqdkibdby2" path="res://assets/enemies/egg turret/Idle/idle.png" id="2_1m41y"]
[ext_resource type="Script" uid="uid://c051edkrogcae" path="res://scenes/enemies/drone/rotate_raycast.gd" id="2_f1wuq"]
[ext_resource type="BehaviorTree" uid="uid://bu2y7rk1ojl78" path="res://ai/trees/Drone.tres" id="3_5b617"]
[ext_resource type="AudioStream" uid="uid://c2ch18sm6jpxh" path="res://sound_effects/laser shot.wav" id="4_wa4qw"]
[ext_resource type="Texture2D" uid="uid://d0maw3twh7l54" path="res://assets/enemies/egg turret/Idle/thruster.png" id="5_f1wuq"]
[ext_resource type="Material" uid="uid://c2l3q7j41m2i7" path="res://Shaders/particle_presets/anim_time_hframes.tres" id="6_xglp3"]

[sub_resource type="CircleShape2D" id="CircleShape2D_wa4qw"]
radius = 8.85942

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xuw8x"]
size = Vector2(28, 15)

[sub_resource type="Animation" id="Animation_sm4lv"]
length = 0.001

[sub_resource type="Animation" id="Animation_but12"]
resource_name = "laser"
length = 0.3
loop_mode = 1
step = 0.1

[sub_resource type="AnimationLibrary" id="AnimationLibrary_dgopl"]
_data = {
&"RESET": SubResource("Animation_sm4lv"),
&"laser": SubResource("Animation_but12")
}

[sub_resource type="BlackboardPlan" id="BlackboardPlan_but12"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_8b6qt"]
particles_animation = true
particles_anim_h_frames = 2
particles_anim_v_frames = 1
particles_anim_loop = false

[node name="drone" type="CharacterBody2D"]
position = Vector2(21, 0)
collision_layer = 4
collision_mask = 31
wall_min_slide_angle = 0.0
script = ExtResource("1_but12")
speed = 1000

[node name="line_of_sight" type="RayCast2D" parent="."]
unique_name_in_owner = true
target_position = Vector2(0, 1000)
script = ExtResource("2_f1wuq")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(2, -1)
rotation = 3.14159
scale = Vector2(1.69551, -2.125)
shape = SubResource("CircleShape2D_wa4qw")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="."]
position = Vector2(0, 23.5)
shape = SubResource("RectangleShape2D_xuw8x")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_dgopl")
}

[node name="Timer" type="Timer" parent="."]
process_callback = 0
wait_time = 0.1
autostart = true

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
path_desired_distance = 5.0
target_desired_distance = 100.0
path_max_distance = 10.0
path_postprocessing = 1
avoidance_enabled = true
radius = 25.0
max_speed = 200.0

[node name="Sprites" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="idle" type="Sprite2D" parent="Sprites"]
unique_name_in_owner = true
scale = Vector2(-1, 1)
texture = ExtResource("2_1m41y")

[node name="BTPlayer" type="BTPlayer" parent="."]
behavior_tree = ExtResource("3_5b617")
blackboard_plan = SubResource("BlackboardPlan_but12")

[node name="laser_sound" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true
stream = ExtResource("4_wa4qw")
volume_db = -54.534
pitch_scale = 1.59

[node name="GPUParticles2D" type="GPUParticles2D" parent="."]
material = SubResource("CanvasItemMaterial_8b6qt")
position = Vector2(1, 22)
amount = 2
texture = ExtResource("5_f1wuq")
lifetime = 0.15
speed_scale = 20.34
explosiveness = 1.0
randomness = 0.21
process_material = ExtResource("6_xglp3")

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="velocity_computed" from="NavigationAgent2D" to="." method="_on_navigation_agent_2d_velocity_computed"]
